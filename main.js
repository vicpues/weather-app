!function(){"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(){var t;e.g.importScripts&&(t=e.g.location+"");var r=e.g.document;if(!t&&r&&(r.currentScript&&"SCRIPT"===r.currentScript.tagName.toUpperCase()&&(t=r.currentScript.src),!t)){var n=r.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=n[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t}();var t=e.p+"7a40ffb9c884c530421c.svg",r=e.p+"9f878e6db090fa61ff22.svg",n=e.p+"39ff8239d05bb6bd9e14.svg",o=e.p+"88324c576249e65e9f10.svg",i=e.p+"fdb5c4b6049500d70849.svg",c=e.p+"493dbe02687acb378886.svg",s=e.p+"20bf1663a9e6a1f9118f.svg",a=e.p+"185d634627de0cd2834a.svg",u=e.p+"393785b76974f4b4b805.svg",d=e.p+"52b254ea98ad5ff395a9.svg",l=e.p+"e5b80b63b2953dfcb2cc.svg",p=e.p+"678cc32c9135acedc9b7.svg",h=e.p+"11251537d6d7551b98df.svg";function m(e,m,g){w=function(e){const t={},r={location:"h2.location-info",time:"h3.time-info",picture:"img.card-picture",description:"figcaption.card-description",temperature:"li.temperature p.data-text",cloudCover:"li.cloud-cover p.data-text",wind:"li.wind p.data-text",rain:"li.rain p.data-text",snow:"li.snow p.data-text",uvIndex:"li.uv-index p.data-text"};for(let[n,o]of Object.entries(r))t[n]=e.querySelector(o);return t}(e),f=m,v=g,w.picture.src=h,w.picture.classList.add("spin"),w.location.textContent=f.location,w.time.textContent=b.time(),w.description.textContent=f.description,w.temperature.textContent=b.temperature(),w.cloudCover.textContent=`${f.cloudCoverPercent} %`,w.wind.textContent=b.wind(),w.rain.textContent=b.rain(),w.snow.textContent=b.snow(),w.uvIndex.textContent=f.uvIndex,function(){const e=function(){let e,h;const m=f.timeEpoch>f.sunsetEpoch||f.timeEpoch<f.sunriseEpoch;return f.snowDepthCentimeters>=10?(e=t,h="A cloud with heavy snow"):f.snowDepthCentimeters>0?(e=r,h="A cloud with light snow"):f.precipMilimeters>10||f.precipMilimeters>0&&m||f.precipMilimeters>0&&f.cloudCoverPercent>80?(e=n,h="A rainy cloud"):f.precipMilimeters>0?(e=o,h="A rainy cloud with the sun peeking behind it"):f.windKmh>50&&f.cloudCoverPercent>50?(e=i,h="A storm cloud with rain and lightning"):f.tempCelsius<-10||f.tempCelsius<0&&f.cloudCoverPercent<25?(e=c,h="A blue thermometer showing a low temperature with snowflakes next to it"):f.tempCelsius>37||f.tempCelsius>32&&f.cloudCoverPercent<25?(e=s,h="A red thermometer showing a high temperature with a melting sun next to it"):f.cloudCoverPercent>85?(e=a,h="A group of overcast clouds"):f.cloudCoverPercent>25&&m?(e=u,h="A cloud with the moon and some stars peeking behind it"):f.cloudCoverPercent>25?(e=d,h="A cloud with the sun peeking behind it"):m?(e=l,h="A large crescent moon with a star next to it"):(e=p,h="A clear, bright sun"),{src:e,alt:h}}();w.picture.classList.remove("spin"),w.picture.src=e.src,w.picture.alt=e.alt}()}let w,f,v;const g="metric",C="us",b={time(){const e=f.timeHour,t=Number(e.slice(0,2)),r=e.slice(3,5);return v===g?`At ${t}:${r}`:v===C?`At ${t<=13?t:t-12}:${r} ${t<=13?"am":"pm"}`:void 0},temperature(){let e=f.tempCelsius;return v===g?(e=Math.floor(e),`${e} ºC`):v===C?`${Math.floor(1.8*e+32)} ºF`:void 0},wind(){let e=f.windKmh,t=f.windDegrees;const r=[[23,"N"],[68,"NE"],[113,"E"],[158,"SE"],[203,"S"],[248,"SW"],[293,"W"],[338,"NW"],[360,"N"]].find((e=>e[0]>=t));return v===g?(e=Math.floor(e),`${e} Km/h ${r[1]}`):v===C?`${Math.floor(.621371*e)} mph ${r[1]}`:void 0},rain(){const e=`${Math.ceil(f.precipProbPercent)} %`;let t=f.precipMilimeters;return v===g?(t=Math.ceil(t),`${e} of ${t} mm`):v===C?`${e} of ${Math.ceil(t/25.4)} in.`:void 0},snow(){let e=f.snowDepthCentimeters;return v===g?(e=Math.ceil(e),`${e} cm`):v===C?`${Math.ceil(e/2.54)} in.`:void 0}};let x,y,$,E=function(){let e;try{e=window.localStorage;const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(t){return t instanceof DOMException&&"QuotaExceededError"===t.name&&e&&0!==e.length}}();const S={locationForm:document.querySelector("form#location-search"),weatherCard:document.querySelector("article.weather-card"),unitSwitch:document.querySelector("fieldset#units")};async function A(){try{const e=S.weatherCard;y=await async function(e){const t=encodeURI(e),r=async function(e){try{const t=await e.json(),r=t.resolvedAddress,n=t.currentConditions;return{location:r,description:n.conditions,tempCelsius:n.temp,cloudCoverPercent:n.cloudcover,windKmh:n.windspeed,windDegrees:n.winddir,precipMilimeters:n.precip,precipProbPercent:n.precipprob,snowDepthCentimeters:n.snowdepth,uvIndex:n.uvindex,timeHour:n.datetime,timeEpoch:n.datetimeEpoch,sunriseEpoch:n.sunriseEpoch,sunsetEpoch:n.sunsetEpoch}}catch(e){throw console.error("Failed to parse response:",e),e}}(await async function(e){try{return fetch(`https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${e}/today?unitGroup=metric&include=current&key=UBL9CLWY4JCV5ZZYVBPEWYYN5`,{mode:"cors"})}catch(e){throw console.error("Failed to contact weather API:",e),e}}(t));return r}($),m(e,y,x)}catch(e){const t="There was a problem fetching weather data";console.error(t,e),alert(t)}}function P(){E&&(x&&(window.localStorage.units=x),$&&(window.localStorage.query=$))}window.addEventListener("load",(function(){if(!E)return;E&&(x=window.localStorage.getItem("units"),$=window.localStorage.getItem("query"));const e=x||"metric";document.querySelector(`input[value="${e}"]`).checked=!0,$&&A()})),S.locationForm.addEventListener("submit",(function(e){e.preventDefault();const t=new FormData(S.locationForm);$=t.get("query"),P(),A()})),S.unitSwitch.addEventListener("click",(function(){x=document.querySelector('input[name="units"]:checked').value,P(),y&&m(S.weatherCard,y,x)}))}();